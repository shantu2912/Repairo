<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Review Booking - FixZen</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.3/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-olive': '#5D5646', 'brand-gold': '#A07D54', 'brand-cream': '#EEEAE2', 'brand-dark': '#4D4C4B', 'brand-beige': '#DFD4C3'
                    },
                    fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'] },
                    boxShadow: { 
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.05)',
                        'float': '0 10px 30px -5px rgba(0,0,0,0.1)'
                    },
                    animation: {
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                        'shimmer': 'shimmer 2s linear infinite',
                    },
                    keyframes: {
                        slideUp: { '0%': { transform: 'translateY(15px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
                        shimmer: { '0%': { backgroundPosition: '-200% 0' }, '100%': { backgroundPosition: '200% 0' } }
                    }
                }
            }
        }
    </script>
    <style>
        body { -webkit-tap-highlight-color: transparent; -webkit-touch-callout: none; user-select: none; }
        .no-scroll::-webkit-scrollbar { display: none; }
        .no-scroll { -ms-overflow-style: none; scrollbar-width: none; }
        
        .receipt-bottom {
            background-image: linear-gradient(135deg, #fafafa 50%, transparent 50%), linear-gradient(45deg, #fafafa 50%, transparent 50%);
            background-size: 20px 20px;
            background-repeat: repeat-x;
            background-position: left bottom;
        }
        
        /* Smooth fade for elements */
        [x-cloak] { display: none !important; }
    </style>
</head>

<body class="bg-brand-cream text-brand-dark antialiased" x-data="cartLogic()">

    <div class="max-w-md mx-auto min-h-screen bg-brand-cream relative shadow-2xl overflow-hidden pb-44">

        <header class="sticky top-0 z-40 bg-brand-cream/90 backdrop-blur-md px-6 py-4 flex items-center justify-between border-b border-brand-olive/5">
            <button onclick="window.history.back()" class="w-10 h-10 rounded-full bg-white border border-brand-beige/50 flex items-center justify-center text-brand-olive active:scale-90 transition-transform shadow-sm">
                <i class="fa-solid fa-arrow-left"></i>
            </button>
            <h1 class="font-bold text-brand-olive text-lg">Checkout</h1>
            <div class="w-10"></div>
        </header>

        <main class="px-6 mt-6 space-y-6">

            <div class="bg-white rounded-[24px] p-4 shadow-sm border border-brand-beige/30 flex gap-4 items-center animate-slide-up" style="animation-delay: 0.1s;">
                <img src="https://images.unsplash.com/photo-1621905251189-08b45d6a269e?q=80&w=200" class="w-20 h-20 rounded-2xl object-cover shadow-sm">
                <div class="flex-1">
                    <div class="flex justify-between items-start">
                        <h3 class="font-bold text-brand-olive text-lg leading-tight">AC Repair</h3>
                        <button @click="alert('Redirect to schedule page')" class="text-[10px] font-bold text-brand-gold bg-brand-gold/10 px-2 py-1 rounded-lg border border-brand-gold/20 active:bg-brand-gold active:text-white transition-colors">
                            <i class="fa-solid fa-pen mr-1"></i> EDIT
                        </button>
                    </div>
                    <p class="text-xs text-brand-dark/50 mt-1">Today, 4:00 PM â€¢ Arjun Verma</p>
                    <div class="flex items-center gap-1 mt-2">
                        <i class="fa-solid fa-shield-halved text-green-600 text-[10px]"></i>
                        <span class="text-[10px] font-medium text-brand-dark/60">Verified Professional</span>
                    </div>
                </div>
            </div>

            <div class="animate-slide-up" style="animation-delay: 0.2s;">
                <div class="flex justify-between items-center mb-3 px-1">
                    <h4 class="font-bold text-brand-olive text-xs uppercase tracking-wider">Location</h4>
                </div>
                
                <div class="flex gap-3 overflow-x-auto no-scroll pb-2 snap-x snap-mandatory -mx-6 px-6">
                    <div class="snap-center min-w-[60px] flex items-center justify-center rounded-2xl border border-dashed border-brand-gold bg-brand-gold/5 active:bg-brand-gold/20 transition-colors">
                        <div class="flex flex-col items-center gap-1">
                            <i class="fa-solid fa-location-crosshairs text-brand-gold"></i>
                            <span class="text-[8px] font-bold text-brand-gold">GPS</span>
                        </div>
                    </div>

                    <div @click="address = 'home'" class="snap-center min-w-[150px] p-4 rounded-2xl border transition-all duration-300 relative cursor-pointer"
                         :class="address === 'home' ? 'bg-brand-olive border-brand-olive shadow-lg scale-[1.02]' : 'bg-white border-transparent shadow-sm'">
                        <div class="flex justify-between mb-2">
                            <i class="fa-solid fa-house" :class="address === 'home' ? 'text-brand-gold' : 'text-brand-olive'"></i>
                            <div x-show="address === 'home'" class="w-4 h-4 bg-brand-gold rounded-full flex items-center justify-center"><i class="fa-solid fa-check text-[8px] text-white"></i></div>
                        </div>
                        <p class="font-bold text-sm" :class="address === 'home' ? 'text-white' : 'text-brand-olive'">Home</p>
                        <p class="text-[10px] mt-1 leading-tight" :class="address === 'home' ? 'text-brand-beige' : 'text-brand-dark/50'">Plot 108, Civil Lines,<br>Nagpur</p>
                    </div>

                    <div @click="address = 'office'" class="snap-center min-w-[150px] p-4 rounded-2xl border transition-all duration-300 relative cursor-pointer"
                         :class="address === 'office' ? 'bg-brand-olive border-brand-olive shadow-lg scale-[1.02]' : 'bg-white border-transparent shadow-sm'">
                         <div class="flex justify-between mb-2">
                            <i class="fa-solid fa-briefcase" :class="address === 'office' ? 'text-brand-gold' : 'text-brand-olive'"></i>
                            <div x-show="address === 'office'" class="w-4 h-4 bg-brand-gold rounded-full flex items-center justify-center"><i class="fa-solid fa-check text-[8px] text-white"></i></div>
                        </div>
                        <p class="font-bold text-sm" :class="address === 'office' ? 'text-white' : 'text-brand-olive'">Office</p>
                        <p class="text-[10px] mt-1 leading-tight" :class="address === 'office' ? 'text-brand-beige' : 'text-brand-dark/50'">IT Park, Wing B,<br>Nagpur</p>
                    </div>
                </div>
            </div>

            <div class="animate-slide-up" style="animation-delay: 0.25s;">
                <h4 class="font-bold text-brand-olive text-xs uppercase tracking-wider mb-2 px-1">Instruction for Expert</h4>
                <div class="bg-white rounded-2xl p-3 border border-brand-beige/40 shadow-sm flex gap-3">
                    <div class="mt-1 text-brand-gold"><i class="fa-regular fa-comment-dots"></i></div>
                    <textarea x-model="instruction" placeholder="E.g., 'Do not ring doorbell', 'Beware of dog'..." class="w-full text-xs font-medium text-brand-dark bg-transparent outline-none resize-none h-10 placeholder-brand-dark/30"></textarea>
                </div>
            </div>

            <div class="animate-slide-up" style="animation-delay: 0.3s;">
                <div class="bg-[#fafafa] rounded-t-2xl p-6 relative shadow-sm border border-brand-beige/30 receipt-bottom pb-10">
                    
                    <div x-show="discount > 0" x-transition class="bg-green-100 text-green-700 text-xs font-bold text-center py-2 rounded-lg mb-4 border border-green-200">
                        ðŸŽ‰ You are saving â‚¹<span x-text="discount"></span> on this order!
                    </div>

                    <h4 class="font-bold text-brand-dark/40 text-[10px] uppercase tracking-widest text-center mb-6">Bill Details</h4>
                    
                    <div class="space-y-3 text-sm font-medium text-brand-dark/70">
                        <div class="flex justify-between"><span>Item Total</span> <span>â‚¹499</span></div>
                        <div class="flex justify-between"><span>Taxes & Fee</span> <span>â‚¹42</span></div>
                        <div class="flex justify-between"><span>Visiting Charges</span> <span class="text-green-600">FREE</span></div>
                        
                        <div x-show="discount > 0" class="flex justify-between text-green-600">
                            <span class="flex items-center gap-2">Coupon Discount</span> 
                            <span>- â‚¹<span x-text="discount"></span></span>
                        </div>

                        <div class="border-b border-dashed border-brand-dark/10 my-2"></div>
                        
                        <div class="flex justify-between items-center text-brand-olive">
                            <span class="font-bold">Grand Total</span>
                            <span class="font-extrabold text-2xl">â‚¹<span x-text="499 + 42 - discount"></span></span>
                        </div>
                    </div>

                    <div class="mt-6 flex gap-2">
                        <div class="relative flex-1">
                            <i class="fa-solid fa-ticket absolute left-3 top-3.5 text-brand-gold/50 text-xs"></i>
                            <input type="text" x-model="couponCode" placeholder="Promo Code" class="w-full bg-white border border-brand-beige rounded-xl py-3 pl-9 pr-2 text-xs font-bold uppercase outline-none focus:border-brand-gold transition-colors">
                        </div>
                        <button @click="applyCoupon()" x-show="!discount" class="bg-brand-dark text-white px-4 rounded-xl text-[10px] font-bold tracking-wider hover:bg-brand-gold transition-colors">APPLY</button>
                    </div>
                </div>
            </div>

            <div class="px-2 pb-6 animate-slide-up" style="animation-delay: 0.4s;">
                <div class="flex gap-3 items-start opacity-60">
                    <i class="fa-solid fa-circle-info text-brand-dark text-xs mt-0.5"></i>
                    <p class="text-[10px] leading-relaxed text-brand-dark">
                        <span class="font-bold">Cancellation Policy:</span> Free cancellation up to 2 hours before the service. A fee of â‚¹50 applies thereafter.
                    </p>
                </div>
            </div>

        </main>

        <div class="fixed bottom-0 left-0 w-full bg-white/95 backdrop-blur-xl border-t border-brand-beige/30 p-6 z-50 rounded-t-[30px] shadow-[0_-10px_40px_rgba(0,0,0,0.05)]">
            <div class="relative w-full h-[56px] bg-brand-cream rounded-full overflow-hidden shadow-inner border border-brand-beige/20 touch-none"
                 x-ref="track"
                 @touchstart="startDrag"
                 @touchmove="drag"
                 @touchend="endDrag"
                 @mousedown="startDrag"
                 @mousemove="drag"
                 @mouseup="endDrag"
                 @mouseleave="endDrag">
                
                <div class="absolute inset-0 flex items-center justify-center z-0 pointer-events-none">
                    <span class="text-brand-olive/30 font-bold text-xs tracking-[0.2em] uppercase animate-shimmer bg-gradient-to-r from-transparent via-brand-gold/60 to-transparent bg-[length:200%_100%] bg-clip-text"
                          x-text="confirmed ? 'CONFIRMING...' : 'SLIDE TO PAY'"></span>
                </div>
                
                <div class="absolute top-0 left-0 h-full bg-brand-gold transition-all duration-75 pointer-events-none" :style="`width: ${progress}%`"></div>
                
                <div class="absolute top-1 h-[48px] w-[48px] bg-white rounded-full shadow-md z-20 flex items-center justify-center transition-transform active:scale-105"
                     :style="`left: calc(${progress}% - 48px + 4px)`">
                     <i class="fa-solid fa-chevron-right text-brand-gold" x-show="!confirmed"></i>
                     <i class="fa-solid fa-check text-green-500 text-lg animate-bounce" x-show="confirmed" style="display:none"></i>
                </div>
            </div>
        </div>

    </div>

    <script>
        function cartLogic() {
            return {
                address: 'home',
                couponCode: '',
                discount: 0,
                instruction: '',
                dragging: false,
                progress: 8,
                confirmed: false,
                
                applyCoupon() {
                    if (this.couponCode.toUpperCase() === 'FIX50') {
                        this.discount = 50;
                    } else {
                        alert('Try FIX50');
                    }
                },
                
                startDrag(e) { if(this.confirmed) return; this.dragging = true; },
                
                drag(e) {
                    if(!this.dragging || this.confirmed) return;
                    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                    const track = this.$refs.track;
                    const rect = track.getBoundingClientRect();
                    let percent = ((clientX - rect.left) / rect.width) * 100;
                    this.progress = Math.min(100, Math.max(10, percent));
                },
                
                endDrag() {
                    if(this.confirmed) return;
                    this.dragging = false;
                    if(this.progress > 85) {
                        this.progress = 100;
                        this.confirmed = true;
                        if(navigator.vibrate) navigator.vibrate(50);
                        setTimeout(() => {
                            document.querySelector('.fa-check').style.display = 'block';
                            document.querySelector('.fa-chevron-right').style.display = 'none';
                        }, 200);
                        setTimeout(() => { window.location.href = 'login.html'; }, 1000);
                    } else {
                        this.progress = 8;
                    }
                }
            }
        }
    </script>
</body>
</html>
